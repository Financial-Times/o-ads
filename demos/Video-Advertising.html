<!DOCTYPE html>
<!--[if IE 7]>         <html class="o-useragent-ie7 o-hoverable-on"> <![endif]-->
<!--[if IE 8]>         <html class="o-useragent-ie8 o-hoverable-on"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="o-hoverable-on"> <!--<![endif]-->
<head>
    <meta charset="utf-8" />
    <title>o-ads: Video-Advertising demo</title>
    <meta name="viewport" content="initial-scale=1.0, width=device-width" />
    <script src="//polyfill.webservices.ft.com/v1/polyfill.min.js"></script>
    <style>body { margin: 0; }.demo-js .o--if-nojs { display: none; }</style>
    <link rel="stylesheet" href="/bundles/css?modules=o-ads:/demos/src/demo.scss" />
</head>
<body class="o-hoverable-on">
    <script>(function(d) {var b = d.getElementsByTagName('body')[0];b.className = b.className + ' demo-js';})(document);</script>
    <script>
    ads = ads.init({
        dfp_site: 'ftcom.5887.video',
        dfp_zone: 'video'
        eid: 'oads'
    }
});

</script>

<link href="//vjs.zencdn.net/4.5/video-js.css" rel="stylesheet">
<link rel="stylesheet" href="/bundles/js?modules=o-ads:/demos/src/videojs.ads.css"/>
<link rel="stylesheet" href="/bundles/js?modules=o-ads:/demos/src/videojs.ima.css"/>

<video id="content_video" class="video-js vjs-default-skin"
       controls preload="auto" width="640"
       height="360">
    <source src="BucksBunnyShort.mp4" type="video/mp4"></source>
</video>

<div id="credits"> Sample video credits (c) copyright 2008, Blender Foundation / www.bigbuckbunny.org</div>

<!-- Load dependent scripts -->
<script src="//vjs.zencdn.net/4.5/video.js"></script>
<script src="//imasdk.googleapis.com/js/sdkloader/ima3.js"></script>

<script src="/bundles/js?modules=o-ads:/demos/src/videojs.ads.js"></script>
<script src="/bundles/js?modules=o-ads:/demos/src/videojs.ima.js"></script>

<script>

    var player = videojs('content_video');

    var options = {
      id: 'content_video',
      adTagUrl: ads.buildURLForVideo('video','','').fullURL
    };


    player.ima(options);

    /*
    player.ima.requestAds();
    // On mobile devices, you must call initializeAdDisplayContainer as the result
    // of a user action (e.g. button click). If you do not make this call, the SDK
    // will make it for you, but not as the result of a user action. For more info
    // see our examples, all of which are set up to work on mobile devices.
    // player.ima.initializeAdDisplayContainer();
    player.play();

    */

    // Remove controls from the player on iPad to stop native controls from stealing
// our click
var contentPlayer =  document.getElementById('content_video_html5_api');
if (navigator.userAgent.match(/iPad/i) != null &&
    contentPlayer.hasAttribute('controls')) {
  contentPlayer.removeAttribute('controls');
}

// Initialize the ad container when the video player is clicked, but only the
// first time it's clicked.
var clickedOnce = false;
player.on('click', function() {
    if (!clickedOnce) {
      player.ima.initializeAdDisplayContainer();
      player.ima.requestAds();
      player.play();
      clickedOnce = true;
    }
});


</script>
    <script src="/bundles/js?modules=o-ads:/demos/src/demo.js"></script>
    <script src="//registry.origami.ft.com/embedapi?autoload=resize"></script>
</body>
</html>