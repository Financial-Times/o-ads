<!DOCTYPE html>
<html>
<head>
  <title>Ads Lib Reporting</title>
  <script>
    var FT = FT || {};
  </script>
  <script src="site/js/JSON2.min.js"></script>
  <script src="test-classes/lib/jquery/jquery-1.7.2.js"></script>
  <script src="site/js/bootstrap.min.js"></script>
  <script src="site/js/jstorage.min.js"></script>
  <script src="site/js/socket.io.js"></script>
  <script src="test-classes/js/ft/advertising.utils.js"></script>
  <script src="test-classes/js/ft/advertising.utils.cookie.js"></script>
  <script src="test-classes/js/util/mock-ads.html.js"></script>

  <link href="site/css/bootstrap.min.css" rel="stylesheet">
  <!--link href="site/css/bootstrap-responsive.min.css" rel="stylesheet" -->
  <link href="site/css/custom.css" rel="stylesheet">
</head>
<body>
<div class="navbar navbar-inverse navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container-fluid">
<!--       <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button> -->
      <a class="brand" href="./index.html">Ads Lib Reporting</a>
      <ul class="nav">
        <li>
            <a href="coverage/total-report.html" target="content">Coverage Report</a>
        </li>
        <li>
            <a href="site/jsdoc" target="content">JSDocs</a>
        </li>
        <li>
            <a href="test-classes" target="content">QUnit Runners</a>
        </li>
        <li>
            <a href="surefire-reports/html" target="content">QUnit Report</a>
        </li>
        <li id="jshint">
            <a href="site/jshint/jshint.html" target="content">JSHint <span class="badge badge-important"></span></a>
        </li>
        <li class="dropdown">
          <a href="#" id="dashboards" class="dropdown-toggle" data-toggle="dropdown">Dashboards <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li>
              <a href="https://dash.metamx.com/ft/home" target="content">Meta Markets</a>
            </li>
            <li>
              <a href="https://deepview1p.newgrove.com/" target="content">Deep View</a>
            </li>
            <li>
              <a href="http://www.krux.com/" target="content">Krux</a>
            </li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="#" id="tools" class="dropdown-toggle" data-toggle="dropdown">Tools <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li>
              <a tabindex="-1" href="https://www.google.com/dfp" target="_blank">DFP</a>
            </li>
            <li>
              <a tabindex="-1" href="http://ahp.svc.ft.com/tasks/project/ProjectTasks/viewDashboard?projectId=648" target="_blank">AHP</a>
            </li>
            <li>
              <a tabindex="-1" href="http://git.svc.ft.com/summary/modules%2Fadvertising.git" target="content">Git Blit</a>
            </li>
            <li>
              <a tabindex="-1" href="http://opentag.qubitproducts.com/QDashboard/" target="content">OpenTag</a>
            </li>
            <li>
              <a href="dist/tools/cookie-tool.html" target="content">Cookie Tool</a>
            </li>
            <li>
              <a href="http://ft-ad-enablement.appspot.com/h5admaker/index.html" target="content">JSON Admaker</a>
            </li>
            <li>
              <a href="http://admintools.internal.ft.com:86/adstools/html/aud-sci-encoding.html" target="content">Audience Science Encoding</a>
            </li>
            <li>
              <a href="http://tagshooter.com" target="content">Tagshooter</a>
            </li>
            <li>
              <a href="http://admin.brightcove.com/viewer/BrightcoveDebugger.html" target="content">Brightcove Debug</a>
            </li>
            <li>
              <a href="http://ftsupport.osb.ft.com:3335/" target="content">Digital Island</a>
            </li>
          </ul>
        </li>
      </ul>
      <ul class="nav pull-right" id="testMode">
        <li class="dropdown"><a href="#" id="drop2" class="dropdown-toggle" data-toggle="dropdown">Unit <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a tabindex="-1" href="#">unit</a></li>
            <li><a tabindex="-1" href="#">integration</a></li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</div>
  <iframe src="" name="content">
    <h1>hi there</h1>
    <p>please pick an option from the top</p>
  </iframe>
  <ul id="test-results">
    <!-- <li data-browser-name="chrome" data-browser-version="23">
      Chrome <span class="badge badge-success">6</span>
    </li>
    <li data-browser-name="firefox" data-browser-version="16">
      Firefox <span class="badge badge-success">6</span>
    </li>
    <li data-browser-name="canary" data-browser-version="18">
      Canary <span class="badge badge-important">6</span>
    </li>
    <li data-browser-name="safari" data-browser-version="6">
      Safari <span class="badge badge-important">6</span>
    </li>
    <li data-browser-name="opera" data-browser-version="9">
        opera 9 <span class="badge badge-success">30</span>
    </li>
    <li data-browser-name="msie" data-browser-version="6">
        msie 6 <span class="badge badge-success">30</span>
    </li>
    <li data-browser-name="msie" data-browser-version="7">
        msie 7 <span class="badge badge-success">30</span>
    </li>
    <li data-browser-name="msie" data-browser-version="8">
        msie 8 <span class="badge badge-success">30</span>
    </li>
    <li data-browser-name="msie" data-browser-version="9">
        msie 9 <span class="badge badge-success">30</span>
    </li>
    <li data-browser-name="msie" data-browser-version="10">
        msie 10 <span class="badge badge-success">30</span>
    </li> -->
  </ul>
  <script>
    (function (w, d, $, u) {
      if(!window.location.origin){
        window.location.origin = window.location.protocol + '//'+ window.location.hostname
        window.location.origin += location.port ? ':' + location.port : '';
      }


      function validateDomain() {
        if(!/ft\.com$/.test(location.hostname)) {
          alert("Warning: Not viewing this site on an ft.com domain will cause some tests to fail!");
        }
      }

      function validateMenuLinks() {
        function each(index, item) {
          locationExp = RegExp('^' + window.location.origin);
          if(locationExp.test(item.href)){
            $.ajax(item.href).success(function () {
              $(item).parents('li').show();
            });
          }
        }
        $('.nav a').each(each);
      }


      function rememberCurrentLocation() {
        function saveLocation(ev) {
          localStorage.setItem('location', this.href);
        }

        $('body').on('click', 'a[target="content"]', saveLocation);

        FT.iframe.load(function () {
            var iframe$;
            try{
                iframe$ = FT.iframeWindow.$;
            }
            catch(err){

            }

            if(iframe$){
                FT.iframeWindow.$('body').on('click', 'a', saveLocation);
            }
        });
      }

      function reloadLocation() {
        var old = localStorage.getItem('location');
        if(!!old) {
          FT.iframe.attr('src', old);
        }
      }

      FT.changeTestMode = function (testMode) {
          FT.testModeLink.text(testMode).append('<b class="caret"></b>');
          FT.testModeDD.removeClass().addClass('nav pull-right ' + testMode);
          FT._ads.utils.cookie('FTQA', testMode);

          if(!!FT.iframeWindow.location.href.match('test-classes')) {
            FT.iframeWindow.location.reload();
          }
      }

      function testModeInit() {
        var testMode = unitOrIntegrationMode(FT._ads.utils.cookies.FTQA);
           FT.testModeDD = $('#testMode');
           FT.testModeLink = $('#drop2');

        FT.testModeDD.on('click', 'ul.dropdown-menu a', function(){
          var testMode = $(this).text().trim();
          FT.changeTestMode(testMode);
        });
        FT.changeTestMode(testMode);
      }

      function onReady() {
        FT.iframe = $('iframe'),
        FT.iframeWindow = FT.iframe.prop('contentWindow'),
        FT.iframeDoc = FT.iframeWindow.document;
        validateDomain();
        validateMenuLinks();
        rememberCurrentLocation();
        reloadLocation();
        testModeInit();
      }

      $(onReady);
    }(window, document, jQuery));
  </script>
</body>
</html>
