<!DOCTYPE html>
<html>
<head>
  <title>Ads Lib Reporting</title>
  <script src="test-classes/lib/jquery/jquery-1.7.2.js"></script>
  <link href="site/css/bootstrap.min.css" rel="stylesheet">
  <!--link href="site/css/bootstrap-responsive.min.css" rel="stylesheet" -->
  <link href="site/css/custom.css" rel="stylesheet">
</head>
<body>

  <div class="navbar"><!-- nav -->
    <div class="navbar-inner">
      <div class="container-fluid">
        <!--a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a -->
        <a class="brand">Ads Lib Reporting</a>
        <div class="nav" style="height: 0px; ">
          <ul id="nav-list" class="nav">
            <li><a href="coverage/total-report.html" target="content">Coverage Report</a></li>
            <li><a href="site/jsdoc" target="content">JSDocs</a></li>
            <li><a href="test-classes" target="content">QUnit Runners</a></li>
            <li><a href="surefire-reports/html" target="content">QUnit Report</a></li>
            <li><a href="site/jshint/jshint.html" target="content">JSHint</a></li>
            <li><a href="site/cookie-tool.html" target="content">Cookie Tool</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <iframe src="" name="content">
    <h1>hi there</h1>
    <p>please pick an option from the top</p>
  </iframe>
  <script>
    (function (w, d, $, u) {
      var iframe;

      function validateDomain() {
        if(location.hostname.match(/ft\.com$/) === null) {
          alert("Warning: Not viewing this site on an ft.com domain will cause some tests to fail!");
        }
      }

      function validateMenuLinks() {
        function each(index, item) {
          $.ajax(item.href).success(function () {
            $(item).parents('li').show();
          });
        }
        $('.nav a').each(each);
      }

      function rememberCurrentLocation(ev) {
        var current = iframe.contentWindow.location.href;
        localStorage.setItem('location', current);
      }

      function reloadLocation() {
        var old = localStorage.getItem('location');
        if(old !== null) {
          iframe.src = localStorage.getItem('location');
        }
      }

      function onReady() {
        iframe = d.querySelector('iframe');
        validateDomain();
        validateMenuLinks();
        reloadLocation();
        $(w).unload(rememberCurrentLocation);
      }

      $(onReady);
    }(window, document, jQuery));
  </script>
</body>
</html>
