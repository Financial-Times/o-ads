<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <link rel="stylesheet" href="../css/tests.css" type="text/css" media="screen" />
    <script src="../lib/jquery/jquery-1.7.2.js"></script>

<script>

/*members AYSC, ENV, FT_U, Properties, adName, ads, adverts, asset,
   banlb, cookies, corppop, description, dfp_site, dfp_zone, doublet, env,
   hlfmpu, intro, isLegacyAPI, length, mktsdata, newssubs, next, refresh,
   refreshTimer, regex, request, requestNewssubs, response,
   timeIntervalTolerance, timeoutTolerance, tlbxrib, useDFP, write,
   writeScript, writeScriptMock, FTQA, banlb2, newssubs2, initDFP, lib
*/

var FT = FT || {};
FT.env =
{
   "dfp_site": "test.5887.dev",
   "dfp_zone": "build-url-test",
   "asset":    "page",

   // Override timeout values to ensure the ad calls have time to come back
   // before the positions are collapsed. This is to ensure we can test the page successfully.
   "timeoutTolerance": 1500000,
   "timeIntervalTolerance": 3000000
};
// Mock the properties object so we are considered to be non-live
FT.Properties = { 'ENV': "ci" };
</script>
    <script src="../js/ft/advertising.utils.js"></script>
    <script src="../js/ft/advertising.utils.cookie.js"></script>
    <script src="../js/ft/HTMLAds.js"></script>
    <script src="../js/ft/DartForPublishers.js"></script>
    <script src="../js/util/mock-ads.html.js"></script>
<script>

    var Tests = {
       'intro': TestMockAd.intro,
       'banlb': TestMockAd.banlb3,
       'newssubs': TestMockAd.newssubs2,
       'tlbxrib': TestMockAd.tlbxrib,
       'mktsdata': TestMockAd.mktsdata,
       'hlfmpu': TestMockAd.hlfmpu,
       'doublet': TestMockAd.doublet,
       'refresh': TestMockAd.refresh
    };

    FT.ads.initDFP();
    //now we find what test mode we are in and either call DFP (Integration) or Mock the ad call (unit)
    var testMode = unitOrIntegrationMode(FT._ads.utils.cookies.FTQA);

    if (testMode === 'unit')
    {
       //if unit test, then we override FT.lib.writeScript with the call to Mocking
       FT._ads.utils.writeScript = function (URL){
           mockAdContent(URL, Tests); // Ads injected immediately
        };
       //HTML Ad call for new Corppops: in unit test mode  we override the urlstem so we can serve the html locally
       FT.corppop.HTMLAdData.urlStem = '';
    }
    </script>
</head>

<body>
    <script>
        document.write('<p>CorpPopTimeout: ' + FT._ads.utils.cookie('CorpPopTimeout') + ' FT_AM: ' + FT._ads.utils.cookie('FT_AM') + ' AYSC: ' + FT._ads.utils.cookie('AYSC') + '</p>');
    </script>
	<p>From here down the page's div structure resembles the home page
		structure. Div's to hold the final ad location are just below.</p>
	<p>If no ads show, then there is something wrong with the code or
		with the ad targeting.</p>
	<div id='father-of-intro'>
		<div id="fullpage-container">Ad request fullpage-container</div>
		<script>
            FT._ads.utils.cookies.FTQA = "ord=123123123";
            FT.ads.request('intro');
        </script>
	</div>
	<div class="clearfix container">
		clearfix container
		<div class="master-column middleSection" data-zone="middleSection">
			master-column middleSection
			<div class="master-row topAds">
				master-row topAds
				<div id="banlb" class="advertising">
					Ad request banlb
					<script>FT.ads.request("banlb");</script>
				</div>
				<div id="newssubs" class="advertising">
					Ad request newssubs
					<script>FT.ads.requestNewssubs();</script>
				</div>
			</div>
			<div class="master-row railSection" data-zone="railSection">
				master-row railSection
				<div id="tlbxrib" class="advertising">
					Ad request tlbxrib
					<script>FT.ads.request("tlbxrib");</script>
				</div>
				<div class="freestyle">
					freestyle
					<div id="wsodHomePageModule" class="rightRailComponent">
						Ad request wsodHomePageModule
						<div id="wsodHomePageModuleContent">
							Ad request wsodHomePageModuleContent
							<div class="advertising" id="mktsdata">
								Ad request mktsdata
								<script>FT.ads.request("mktsdata");</script>
							</div>
						</div>
					</div>
				</div>

				<div id="hlfmpu" class="advertising">
					Ad request hlfmpu
					<script>FT.ads.request("hlfmpu");</script>
				</div>
				<div class="railComponent togglable maximised advertising">
					railComponent togglable maximised advertising <span
						class="toggleButton"> </span>
					<h3 class="">
						<span class="railComponentHeading"> Highlights </span>
					</h3>
					<div class="toggleContent">
						toggleContent
						<div id="doublet">
							Ad request doublet
							<script>FT.ads.request("doublet");</script>
						</div>
					</div>
				</div>

			</div>
		</div>
		<div class="adRequests">
			adRequests
			<div id="oob">
				Ad request oob
				<script>FT.ads.request('oob');</script>
			</div>
			<div id="corppop">
				Ad request corppop
				<script>FT.ads.request('corppop');</script>
			</div>
			<div id="refresh" class="advertising">
				Ad request refresh
				<script>FT.ads.request('refresh');</script>
			</div>

		</div>
	</div>
</body>
</html>
